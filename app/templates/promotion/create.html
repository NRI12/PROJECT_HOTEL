<!DOCTYPE html>
<html>
<head>
    <title>Tạo khuyến mãi</title>
</head>
<body>
    <h1>Tạo khuyến mãi</h1>

    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <p class="flash-{{ category }}">{{ message }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('promotion.create_promotion') }}">
        <div>
            <label>Hotel ID</label>
            <input type="number" name="hotel_id" value="{{ request.form.get('hotel_id', '') }}">
        </div>
        <div>
            <label>Room ID</label>
            <input type="number" name="room_id" value="{{ request.form.get('room_id', '') }}">
        </div>
        <div>
            <label>Tiêu đề *</label>
            <input type="text" name="title" required value="{{ request.form.get('title', '') }}">
        </div>
        <div>
            <label>Mô tả</label>
            <textarea name="description">{{ request.form.get('description', '') }}</textarea>
        </div>
        <div>
            <label>Loại giảm *</label>
            <select name="discount_type" required>
                <option value="">-- Chọn --</option>
                <option value="percentage" {% if request.form.get('discount_type') == 'percentage' %}selected{% endif %}>Phần trăm</option>
                <option value="fixed" {% if request.form.get('discount_type') == 'fixed' %}selected{% endif %}>Cố định</option>
            </select>
        </div>
        <div>
            <label>Giá trị giảm *</label>
            <input type="number" name="discount_value" step="0.01" min="0" required value="{{ request.form.get('discount_value', '') }}">
        </div>
        <div>
            <label>Ngày bắt đầu *</label>
            <input type="datetime-local" name="start_date" required value="{{ request.form.get('start_date', '') }}">
        </div>
        <div>
            <label>Ngày kết thúc *</label>
            <input type="datetime-local" name="end_date" required value="{{ request.form.get('end_date', '') }}">
        </div>
        <div>
            <label>Ngày áp dụng (ví dụ: Mon,Tue)</label>
            <input type="text" name="applicable_days" value="{{ request.form.get('applicable_days', '') }}">
        </div>
        <div>
            <label>Số đêm tối thiểu</label>
            <input type="number" min="1" name="min_nights" value="{{ request.form.get('min_nights', '') }}">
        </div>
        <div>
            <button type="submit">Tạo</button>
            <a href="{{ url_for('promotion.list_promotions') }}">Hủy</a>
        </div>
    </form>
</body>
</html>

