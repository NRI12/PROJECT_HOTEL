<!DOCTYPE html>
<html>
<head>
    <title>Quản lý tiện nghi phòng</title>
</head>
<body>
    <h1>Quản lý tiện nghi phòng</h1>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="message {{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    {% if result and result[0].get_json() and result[0].get_json().success %}
        {% set current_amenities = result[0].get_json().data.amenities %}
        {% set current_amenity_ids = current_amenities|map(attribute='amenity_id')|list %}
        
        <h2>Tiện nghi hiện tại</h2>
        {% if current_amenities %}
            <ul>
                {% for amenity in current_amenities %}
                    <li>{{ amenity.amenity_name }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Chưa có tiện nghi nào</p>
        {% endif %}
        
        <h2>Cập nhật tiện nghi</h2>
        <form method="POST" action="/room/{{ room_id }}/amenities/update">
            <p><strong>Chọn tiện nghi:</strong></p>
            
            <p><small>Danh sách tiện nghi phổ biến:</small></p>
            <div>
                <input type="checkbox" name="amenity_ids" value="1" {% if 1 in current_amenity_ids %}checked{% endif %}>
                <label>WiFi miễn phí (ID: 1)</label>
            </div>
            <div>
                <input type="checkbox" name="amenity_ids" value="2" {% if 2 in current_amenity_ids %}checked{% endif %}>
                <label>Điều hòa (ID: 2)</label>
            </div>
            <div>
                <input type="checkbox" name="amenity_ids" value="3" {% if 3 in current_amenity_ids %}checked{% endif %}>
                <label>Tivi (ID: 3)</label>
            </div>
            <div>
                <input type="checkbox" name="amenity_ids" value="4" {% if 4 in current_amenity_ids %}checked{% endif %}>
                <label>Tủ lạnh (ID: 4)</label>
            </div>
            <div>
                <input type="checkbox" name="amenity_ids" value="5" {% if 5 in current_amenity_ids %}checked{% endif %}>
                <label>Phòng tắm riêng (ID: 5)</label>
            </div>
            <div>
                <input type="checkbox" name="amenity_ids" value="6" {% if 6 in current_amenity_ids %}checked{% endif %}>
                <label>Ban công (ID: 6)</label>
            </div>
            <div>
                <input type="checkbox" name="amenity_ids" value="7" {% if 7 in current_amenity_ids %}checked{% endif %}>
                <label>Bồn tắm (ID: 7)</label>
            </div>
            <div>
                <input type="checkbox" name="amenity_ids" value="8" {% if 8 in current_amenity_ids %}checked{% endif %}>
                <label>Máy sấy tóc (ID: 8)</label>
            </div>
            <div>
                <input type="checkbox" name="amenity_ids" value="9" {% if 9 in current_amenity_ids %}checked{% endif %}>
                <label>Két sắt (ID: 9)</label>
            </div>
            <div>
                <input type="checkbox" name="amenity_ids" value="10" {% if 10 in current_amenity_ids %}checked{% endif %}>
                <label>Minibar (ID: 10)</label>
            </div>
            
            <p><small>Hoặc nhập ID tiện nghi (cách nhau bằng dấu phẩy):</small></p>
            <input type="text" name="amenity_ids_text" placeholder="VD: 1,2,3,4" value="{{ request.form.amenity_ids_text or request.args.amenity_ids_text or '' }}">
            
            <div>
                <button type="submit">Cập nhật tiện nghi</button>
            </div>
        </form>
        
    {% else %}
        <p>Không thể tải thông tin tiện nghi</p>
    {% endif %}
    
    <p><a href="/room/{{ room_id }}">Quay lại chi tiết phòng</a></p>
    <p><a href="/room">Quay lại danh sách</a></p>
</body>
</html>