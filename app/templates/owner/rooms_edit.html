{% extends "owner/base.html" %}

{% block title %}Sửa phòng{% endblock %}

{% block content %}

<div class="owner-header">
    <div>
        <h1 class="owner-header-title">Sửa phòng</h1>
        <p class="owner-header-subtitle">Cập nhật thông tin phòng</p>
    </div>
</div>

{% if result[1] == 200 %}
    {% set room = result[0].get_json()['data']['room'] %}

    <div class="owner-card">
        <form method="POST">
            <div class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Khách sạn *</label>
                    <select name="hotel_id" class="form-control" required>
                        <option value="">-- Chọn khách sạn --</option>
                        {% for hotel in hotels %}
                        <option value="{{ hotel.hotel_id }}" {{ 'selected' if hotel.hotel_id == room.hotel_id }}>
                            {{ hotel.hotel_name }}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Loại phòng *</label>
                    <select name="room_type_id" class="form-control" required>
                        <option value="">-- Chọn loại phòng --</option>
                        {% for room_type in room_types %}
                        <option value="{{ room_type.room_type_id }}" {{ 'selected' if room_type.room_type_id == room.room_type_id }}>
                            {{ room_type.type_name }}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Tên phòng *</label>
                    <input type="text" name="room_name" class="form-control" value="{{ room.room_name }}" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Giá cơ bản/đêm (VNĐ) *</label>
                    <input type="number" name="base_price" class="form-control" value="{{ room.base_price }}" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Số khách tối đa *</label>
                    <input type="number" name="max_guests" class="form-control" value="{{ room.max_guests }}" required>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Diện tích (m²)</label>
                    <input type="number" name="size" class="form-control" value="{{ room.size or '' }}" step="0.1">
                </div>

                <div class="col-12">
                    <label class="form-label">Mô tả</label>
                    <textarea name="description" class="form-control" rows="4">{{ room.description or '' }}</textarea>
                </div>

                <div class="col-md-6">
                    <label class="form-label">Số giường đơn</label>
                    <input type="number" name="bed_type_single" class="form-control" value="{{ room.bed_type_single or 0 }}">
                </div>

                <div class="col-md-6">
                    <label class="form-label">Số giường đôi</label>
                    <input type="number" name="bed_type_double" class="form-control" value="{{ room.bed_type_double or 0 }}">
                </div>

                <div class="col-12">
                    <label class="form-label">Trạng thái *</label>
                    <select name="status" class="form-control">
                        <option value="available" {{ 'selected' if room.status == 'available' }}>Có sẵn</option>
                        <option value="occupied" {{ 'selected' if room.status == 'occupied' }}>Đã đặt</option>
                        <option value="maintenance" {{ 'selected' if room.status == 'maintenance' }}>Bảo trì</option>
                    </select>
                </div>

                <div class="col-12">
                    <button type="submit" class="owner-btn owner-btn-primary">Cập nhật</button>
                    <a href="{{ url_for('owner.owner_rooms') }}" class="owner-btn owner-btn-outline-secondary">Hủy</a>
                </div>
            </div>
        </form>
    </div>

{% else %}
    <div class="alert alert-danger">{{ error }}</div>
{% endif %}

{% endblock %}
